<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title><%= title %></title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">

<a href="/dashboard" class="text-blue-600 hover:underline mb-4 inline-block">‚Üê Back to Lessons</a>

<h1 class="text-3xl font-bold mb-6"><%= lesson.title %></h1>

<% lesson.modules.forEach((module, mIndex) => { %>
  <div class="bg-white shadow rounded p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2"><%= module.title %></h2>
    <ul class="list-disc list-inside text-gray-700">
      <% module.topics.forEach((topic, tIndex) => { %>
        <li class="cursor-pointer text-blue-600 hover:underline" onclick="showTopic(<%= mIndex %>, <%= tIndex %>)">
          <%= topic.name %>
        </li>
      <% }) %>
    </ul>
  </div>
<% }) %>

<!-- Topic detail box -->
<div id="topicDetail" class="mt-6 bg-white p-4 shadow rounded hidden">
  <h3 id="topicTitle" class="text-xl font-bold mb-2"></h3>
  <p id="topicContent" class="text-gray-700 mb-2"></p>
  <ul id="topicExamples" class="list-disc list-inside text-gray-700"></ul>
</div>

<script>
const lessonData = <%- JSON.stringify(lesson) %>;

function showTopic(moduleIndex, topicIndex) {
  const topic = lessonData.modules[moduleIndex].topics[topicIndex];
  document.getElementById('topicTitle').textContent = topic.name;
  document.getElementById('topicContent').textContent = topic.content;

  const examplesEl = document.getElementById('topicExamples');
  examplesEl.innerHTML = '';
  topic.examples.forEach(ex => {
    const li = document.createElement('li');
    li.textContent = ex;
    examplesEl.appendChild(li);
  });

  document.getElementById('topicDetail').classList.remove('hidden');
}
</script>

</body>
</html>
